<!DOCTYPE html>
<html>
<head>
  <title>Battle</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/battle.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('#challenge').on('click', function() {
        var title = prompt("Please enter challenge title", "");

        if (title == null || title == "") {
          title = "No Title";
        }
        var multiplier = 1;//$(this).parent('div').parent('div').siblings('div').children('slider').val();
        var opponent = {{{json username}}};
        $.post('/postChallenge', {title: title, multiplier: multiplier, opponent: opponent}, function(result) {
        });
        alert('Posted in Forum!');
      });

      $('#battlelisting').on('click', '#teambattle',function() {
        var title = prompt("Please enter challenge title", "");

        if (title == null || title == "") {
          title = "No Title";
        }
        var multiplier = 1;//$(this).parent('div').parent('div').siblings('div').children('slider').val();
        var opponent = $(this).siblings('#bossName').text();
        var loot = $(this).siblings('#loot').text();
        var level = $(this).siblings('#level').text();
        $.post('/postBattle', {title: title, multiplier: multiplier, opponent: opponent, level: level, loot: loot}, function(result) {
        });
        alert('Posted in Forum!');
      });
    });
  </script>
</head>
<body>

  <!-- Navigation Bar-->
  {{> header username=username}}

  <div id="battlerefresh">
    <p id="battletext">BATTLE</p>
    <p id="timer">⏰ • 1h until task refresh</p>
  </div>

  <!-- Challenge -->
  <!--<form method="post">-->
    <div class="challengesection">
      <div class="battleheader">
        Test your Might
      </div>
      <hr>
      <div class="battlebody">
        <div class="challengecontent">
          <div class="challengedesc">
            Test your might by letting others give you a fight.
          </div>

          <div class="battleopt">
            <div class="buttonopt">
              <input id="challenge" name="challenge" type="submit" class="challengebutton" value="CHALLENGE">
            </div>
          </div>

        </div>
      </div>
      <hr>
      <div class="battlefooter">

        <div class="slidecontainer">
          <input name="challengemultiplier" type="range" min="1" max="100" value="1" class="slider" id="challengemultiplier">
          <p class="outcome" id="challengemultiplierlabel">15m ⇌ x1.0 exp multiplier</p>
        </div>
        -->
      </div>
    </div>
  <!--</form>-->

  <div id="battlelisting">
    {{#each battles}}
      {{> battlecard}}
    {{/each}}
  </div>
</body>
</html>
